---
title: "Complete NGINX Logging Guide: Configuration, Analysis & Monitoring Best Practices"
slug: "nginx-logging"
date: "2025-07-30"
tags: [Logging, NGINX, Web Server Monitoring, OpenTelemetry, Log Management]
authors: [selva]
description: "Master NGINX logging with our comprehensive guide covering access logs, error logs, custom formats, security analysis, performance optimization, and integration with modern monitoring platforms like SigNoz."
keywords: [nginx logging, nginx logs, nginx access logs, nginx error logs, log management, web server monitoring, nginx configuration, log analysis, nginx troubleshooting, opentelemetry logs]
---

NGINX powers over 35% of all websites globally, making it the world's most popular web server. Whether you're managing a small application or enterprise infrastructure, effective NGINX logging is essential for performance optimization, troubleshooting, and security monitoring.

This guide covers everything you need to know about NGINX logging—from basic configuration to advanced analysis techniques that help you debug issues faster and optimize server performance.

![Cover Image](/img/blog/2022/12/nginx_logging_cover.webp)

## Understanding NGINX Log Types

NGINX generates two primary log types, each serving distinct monitoring purposes:

**Access Logs** record every HTTP request to your server, including:
- Client IP addresses and user agents
- Request URLs, methods, and parameters
- Response status codes and sizes
- Request processing times
- Referrer information

**Error Logs** capture server-side issues and diagnostic information:
- Configuration errors and warnings
- Upstream server connection failures
- File permission problems
- SSL/TLS handshake errors
- Resource allocation failures

These logs operate independently, allowing you to configure each for specific monitoring needs. You might enable detailed access logging for traffic analysis while setting error logging to capture only critical issues.

## NGINX Access Log Configuration

Access logs provide comprehensive visibility into client interactions with your server. The `access_log` directive controls this logging behavior.

<figure data-zoomable align='center'>
    <img src="/img/blog/2022/12/nginx_access_log_example.webp" alt="Nginx Access log example"/>
    <figcaption><i>Example of NGINX access logs showing client requests</i></figcaption>
</figure>

### Default Configuration

By default, NGINX logs all requests to `/var/log/nginx/access.log` using the "combined" format:

```nginx
access_log /var/log/nginx/access.log combined;
```

The combined format provides essential request information in a standardized layout compatible with most log analysis tools.

## NGINX Error Log Configuration

Error logs are essential for troubleshooting server-side issues. The `error_log` directive controls error logging with configurable severity levels.

<figure data-zoomable align='center'>
    <img src="/img/blog/2022/12/nginx_error_log_example.webp" alt="Nginx Error log example"/>
    <figcaption><i>Example of NGINX error logs showing server issues</i></figcaption>
</figure>

### Error Log Severity Levels

NGINX supports eight error log levels from most to least severe:

1. **emerg** - Emergency conditions (system unusable)
2. **alert** - Alert conditions (immediate action required)
3. **crit** - Critical conditions
4. **error** - Error conditions
5. **warn** - Warning conditions
6. **notice** - Normal but significant conditions
7. **info** - Informational messages
8. **debug** - Debug-level messages

Example configuration:

```nginx
error_log /var/log/nginx/error.log warn;
error_log /var/log/nginx/debug.log debug;
```

## Custom Log Formats and Structured Logging

### Creating Custom Log Formats

The `log_format` directive allows you to define custom formats tailored to your monitoring needs. Here's an example including response times and compression ratios:

```nginx
log_format performance '$remote_addr - $remote_user [$time_local] '
                      '"$request" $status $body_bytes_sent '
                      '"$http_referer" "$http_user_agent" '
                      'rt=$request_time uct="$upstream_connect_time" '
                      'uht="$upstream_header_time" urt="$upstream_response_time" '
                      'gzip_ratio=$gzip_ratio';

access_log /var/log/nginx/performance.log performance;
```

This custom format captures upstream timing data and compression ratios, which are valuable for performance analysis.

### JSON-Structured Logging

Modern log management platforms work best with structured data. Here's a JSON format optimized for centralized logging:

```nginx
log_format json_combined escape=json
'{'
  '"timestamp": "$time_iso8601",'
  '"remote_addr": "$remote_addr",'
  '"remote_user": "$remote_user",'
  '"request": "$request",'
  '"status": $status,'
  '"body_bytes_sent": $body_bytes_sent,'
  '"http_referer": "$http_referer",'
  '"http_user_agent": "$http_user_agent",'
  '"request_time": $request_time,'
  '"upstream_response_time": "$upstream_response_time",'
  '"upstream_addr": "$upstream_addr",'
  '"host": "$host",'
  '"request_id": "$request_id"'
'}';

access_log /var/log/nginx/access.json json_combined;
```

This JSON format enables easy parsing and querying in log management platforms like SigNoz.

## Performance Optimization with Conditional Logging

### Reducing Log Volume

High-traffic websites generate massive log volumes. Conditional logging reduces storage costs and I/O overhead by filtering unnecessary entries:

```nginx
# Skip logging for successful requests (2xx and 3xx status codes)
map $status $loggable {
    ~^[23]  0;
    default 1;
}

access_log /var/log/nginx/access.log combined if=$loggable;
```

### Excluding Health Checks

```nginx
# Skip logging for health check endpoints
map $request_uri $skiplog {
    ~*/health-check 0;
    ~*/status      0;
    default        1;
}

access_log /var/log/nginx/access.log combined if=$skiplog;
```

This configuration prevents monitoring endpoints from cluttering your access logs.

### Log Sampling for High-Traffic Sites

For extremely high-traffic scenarios, sample only a percentage of requests:

```nginx
# Log only 10% of requests
map $request_id $sample {
    ~[0-9]$ 1;  # Matches if request_id ends with any digit 0-9 (10% sample)
    default 0;
}

access_log /var/log/nginx/sampled.log combined if=$sample;
```

## Advanced Log Configuration Techniques

### Buffered Logging for Performance

Buffered logging reduces disk I/O by writing logs in batches:

```nginx
access_log /var/log/nginx/access.log combined buffer=64k flush=5s;
error_log /var/log/nginx/error.log warn;
```

This configuration buffers up to 64KB of log data and flushes to disk every 5 seconds or when the buffer fills up, reducing write operations.

### Syslog Integration

Send logs to centralized syslog servers for remote log management:

```nginx
# Send access logs to syslog
access_log syslog:server=192.168.1.100:514,facility=local7,tag=nginx_access combined;

# Send error logs to syslog
error_log syslog:server=192.168.1.100:514,facility=local7,tag=nginx_error,severity=error;
```

### Log Rotation Configuration

Implement log rotation to manage disk space:

```nginx
# /etc/logrotate.d/nginx
/var/log/nginx/*.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 0640 nginx adm
    sharedscripts
    prerotate
        if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
            run-parts /etc/logrotate.d/httpd-prerotate; \
        fi \
    endscript
    postrotate
        invoke-rc.d nginx rotate >/dev/null 2>&1
    endscript
}
```

This logrotate configuration rotates logs daily, keeps 14 days of history, and compresses old logs to save disk space.

## Security Analysis and Monitoring

### Detecting Suspicious Activity

Configure specialized logging to identify potential security threats:

```nginx
# Log suspicious requests
map $request_uri $suspicious {
    ~*\.(php|asp|jsp)$  1;  # Requests for dynamic files on static sites
    ~*/\.\./            1;  # Directory traversal attempts
    ~*union.*select     1;  # SQL injection attempts
    default             0;
}

access_log /var/log/nginx/security.log combined if=$suspicious;
```

This creates a dedicated security log containing only potentially malicious requests.

### Rate Limiting and Attack Prevention

Monitor failed authentication attempts and rate limiting:

```nginx
# Log rate-limited requests
limit_req_zone $binary_remote_addr zone=login:10m rate=1r/s;

server {
    location /login {
        limit_req zone=login burst=5 nodelay;
        access_log /var/log/nginx/login_attempts.log combined;
    }
}
```

## Integration with Modern Observability Platforms

### Collecting NGINX Logs with SigNoz

SigNoz provides powerful log management capabilities with advanced querying, visualization, and alerting features. Here's how to integrate NGINX logs with SigNoz using OpenTelemetry.

#### Step 1: Configure JSON Logging

First, configure your NGINX to output logs in JSON format using the structured logging format shown earlier.

#### Step 2: Configure OpenTelemetry Collector

Create an `otel-collector-config.yaml` with a filelog receiver:

```yaml
receivers:
  filelog:
    include: ["/var/log/nginx/access.json"]
    start_at: beginning
    operators:
      - type: json_parser
        timestamp:
          parse_from: attributes.timestamp
          layout: '%Y-%m-%dT%H:%M:%S%z'
      - type: move
        from: attributes.request
        to: body
      - type: remove
        field: attributes.timestamp

processors:
  batch:

exporters:
  otlp:
    endpoint: https://ingest.{region}.signoz.cloud:443
    headers:
      "signoz-access-token": "<SIGNOZ_INGESTION_KEY>"

service:
  pipelines:
    logs:
      receivers: [filelog]
      processors: [batch]
      exporters: [otlp]
```

This configuration uses OpenTelemetry's filelog receiver to parse JSON logs and send them to SigNoz.

#### Step 3: Deploy with Docker Compose

Update your `docker-compose.yaml` to mount the log files:

```yaml
services:
  otel-collector:
    image: otel/opentelemetry-collector:latest
    command: ["--config=/etc/otel-collector-config.yaml"]
    volumes:
      - ./otel-collector-config.yaml:/etc/otel-collector-config.yaml
      - /var/log/nginx:/var/log/nginx:ro
    restart: unless-stopped
```

#### Step 4: Analyze Logs in SigNoz

Once configured, SigNoz provides comprehensive log analysis capabilities:

- **Query Builder**: Use SigNoz's intuitive no-code interface to build complex log queries using dropdowns and filters
- **Dashboards**: Create visualizations for traffic patterns, error rates, and performance metrics
- **Alerting**: Set up alerts for error spikes, unusual traffic patterns, or performance degradation
- **Correlation**: Correlate logs with traces and metrics for comprehensive observability

<figure data-zoomable align='center'>
    <img src="/img/blog/2022/12/nginx_logs_signoz.webp" alt="Nginx logs sent to SigNoz"/>
    <figcaption><i>NGINX logs visualized in SigNoz dashboard</i></figcaption>
</figure>

SigNoz's Logs Explorer provides multiple views:
- **List View**: Detailed log inspection with customizable formats
- **Time Series View**: Graphical visualization of log data over time
- **Table View**: Aggregated operations like log counts or average response times

You can also export logs in Excel or CSV formats and create shareable links for team collaboration.

## Troubleshooting Common NGINX Logging Issues

### Configuration Validation

Always test your configuration before reloading NGINX:

```bash
# Test configuration
sudo nginx -t

# Reload if test passes
sudo nginx -s reload
```

### Permission Issues

Ensure NGINX can write to log directories:

```bash
# Create log directory with proper permissions
sudo mkdir -p /var/log/nginx
sudo chown nginx:nginx /var/log/nginx
sudo chmod 755 /var/log/nginx
```

### Log File Not Created

Common causes and solutions:

1. **Directory doesn't exist**: Create the directory with proper permissions
2. **SELinux restrictions**: Set appropriate SELinux contexts
3. **Disk space full**: Monitor disk usage and implement log rotation
4. **Configuration syntax error**: Use `nginx -t` to validate

### High Disk I/O from Logging

If logging causes performance issues:

1. **Enable log buffering**: Use the `buffer=` parameter
2. **Implement conditional logging**: Skip unnecessary entries
3. **Use async I/O**: Consider buffered logging with `flush=` parameter
4. **Move logs to separate disk**: Use dedicated storage for logs

## Best Practices for Production Environments

### Security Considerations

1. **Sanitize sensitive data**: Avoid logging passwords, tokens, or personal information
2. **Implement log redaction**: Use custom formats to exclude sensitive fields
3. **Secure log files**: Set appropriate file permissions (640 or 644)
4. **Monitor log access**: Track who accesses log files

### Performance Optimization

1. **Use conditional logging**: Reduce unnecessary log entries
2. **Implement proper rotation**: Prevent logs from consuming all disk space
3. **Monitor I/O impact**: Use tools like `iotop` to monitor logging overhead
4. **Consider log levels carefully**: Higher verbosity impacts performance

### Monitoring and Alerting

1. **Set up log-based alerts**: Monitor error rates and unusual patterns
2. **Implement health checks**: Use access logs to verify service availability
3. **Track key metrics**: Response times, status code distributions, traffic patterns
4. **Regular log analysis**: Review logs periodically for optimization opportunities

## Get Started with SigNoz

SigNoz provides comprehensive observability features that make NGINX log management straightforward. With its OpenTelemetry-native log collection, ClickHouse-powered storage, and intuitive Logs Explorer, you can efficiently query, visualize, and alert on your NGINX logs while correlating them with metrics and traces.

You can choose between various deployment options in SigNoz. The easiest way to get started with SigNoz is [SigNoz cloud](https://signoz.io/teams/). We offer a 30-day free trial account with access to all features.

Those who have data privacy concerns and can't send their data outside their infrastructure can sign up for either [enterprise self-hosted or BYOC offering](https://signoz.io/contact-us/).

Those who have the expertise to manage SigNoz themselves or just want to start with a free self-hosted option can use our [community edition](https://signoz.io/docs/install/self-host/).

## Conclusion

Effective NGINX logging provides the foundation for maintaining high-performance web applications. By implementing structured logging, conditional filtering, and integration with modern observability platforms, you gain deep insights into application behavior while maintaining optimal performance.

Key takeaways:

- **Use structured logging** (JSON format) for better integration with log management platforms
- **Implement conditional logging** to reduce log volume and improve performance  
- **Configure proper log rotation** to prevent disk space issues
- **Monitor both access and error logs** for comprehensive visibility
- **Integrate with centralized logging platforms** like SigNoz for advanced analysis and alerting

Whether you're troubleshooting performance issues, investigating security incidents, or optimizing user experience, well-configured NGINX logging enables effective observability and rapid incident response.

Hope we answered all your questions regarding NGINX logging. If you have more questions, feel free to join and ask on our [slack community](https://signoz.io/slack/).

You can also subscribe to our [newsletter](https://newsletter.signoz.io/) for insights from observability nerds at SigNoz — get open source, OpenTelemetry, and devtool-building stories straight to your inbox.